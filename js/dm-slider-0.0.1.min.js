/**
 * Info: Dm Slider
 * User: Dmmo
 * Date: 14-4-26
 * Time: 上午10:45
 * Email: ilostinyoureyes@gmail.com
 */
!function(a){function d(a,b){var c,d;a.css({position:"relative",width:b.width,height:b.height,border:b.border_style,borderRadius:b.border_radius,overflow:"hidden",margin:"0 auto"}),c=a.find(".dm-column").length+1,d=c*b.width,a.find(".dm-column").eq(0).clone().appendTo(a.find(".dm-container")),a.find(".dm-container").css({position:"relative",height:b.height,width:d}),a.find(".dm-column").css({"float":"left",height:b.height,width:b.width})}function e(d,e){var i,j,g=d.find(".dm-column").length,h=1;for(d.append('<div class="sliderbar"></div>'),i=d.find(".sliderbar"),i.css({position:"absolute",height:"20px",bottom:"10px",right:"10px"}),j=1;g-1>=j;j++)i.append("<a href='javascript:void(0)'></a>");i.find("a").css({display:"block","float":"left",margin:"0 3px",width:"20px",height:"20px",borderRadius:"50%"}),i.find("a").first().addClass("on"),i.find("a").bind("click mouseover mouseenter",function(){clearInterval(b),h=a(this).index()+1,c||f(d,e,a(this).index())}),e.autoplay&&d.find(".dm-container").hover(function(){clearInterval(b)},function(){b=setInterval(function(){f(d,e,h),h++,h==g&&(h=1)},e.play_delay)}).trigger("mouseleave")}function f(a,b,d){var h,e=a.find(".dm-column").length-1,f=e*b.width,g=d*b.width;(g>=f||0==d)&&(g=0,d=0,a.find(".dm-container").css("left",-b.width)),c=!0,a.find(".dm-container").animate({left:-g},b.move_delay,function(){c=!1}),h=a.find(".sliderbar"),h.find("a").removeClass("on"),h.find("a").eq(d).addClass("on")}var b,c=!1;a.fn.DM_slider=function(b){var c={width:960,height:480,border_style:"1px solid #ccc",move_delay:300,play_delay:4e3,border_radius:12,autoplay:!0,play_method:"default"},f=a(this).data(),g=a.extend(c,b,f);d(a(this),g),"default"==g.play_method&&e(a(this),g)}}(jQuery);